!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="js/",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={};n.d(r,"create",function(){return u}),n.d(r,"clone",function(){return h}),n.d(r,"copy",function(){return c}),n.d(r,"fromValues",function(){return f}),n.d(r,"set",function(){return l}),n.d(r,"identity",function(){return _}),n.d(r,"transpose",function(){return d}),n.d(r,"invert",function(){return p}),n.d(r,"adjoint",function(){return M}),n.d(r,"determinant",function(){return x}),n.d(r,"multiply",function(){return E}),n.d(r,"translate",function(){return m}),n.d(r,"scale",function(){return T}),n.d(r,"rotate",function(){return b}),n.d(r,"rotateX",function(){return g}),n.d(r,"rotateY",function(){return v}),n.d(r,"rotateZ",function(){return R}),n.d(r,"fromTranslation",function(){return y}),n.d(r,"fromScaling",function(){return A}),n.d(r,"fromRotation",function(){return S}),n.d(r,"fromXRotation",function(){return D}),n.d(r,"fromYRotation",function(){return P}),n.d(r,"fromZRotation",function(){return L}),n.d(r,"fromRotationTranslation",function(){return C}),n.d(r,"fromQuat2",function(){return O}),n.d(r,"getTranslation",function(){return w}),n.d(r,"getScaling",function(){return U}),n.d(r,"getRotation",function(){return B}),n.d(r,"fromRotationTranslationScale",function(){return I}),n.d(r,"fromRotationTranslationScaleOrigin",function(){return V}),n.d(r,"fromQuat",function(){return G}),n.d(r,"frustum",function(){return F}),n.d(r,"perspective",function(){return X}),n.d(r,"perspectiveFromFieldOfView",function(){return H}),n.d(r,"ortho",function(){return W}),n.d(r,"lookAt",function(){return N}),n.d(r,"targetTo",function(){return Y}),n.d(r,"str",function(){return q}),n.d(r,"frob",function(){return j}),n.d(r,"add",function(){return k}),n.d(r,"subtract",function(){return z}),n.d(r,"multiplyScalar",function(){return Z}),n.d(r,"multiplyScalarAndAdd",function(){return K}),n.d(r,"exactEquals",function(){return Q}),n.d(r,"equals",function(){return J}),n.d(r,"mul",function(){return $}),n.d(r,"sub",function(){return tt});var i={};n.d(i,"create",function(){return et}),n.d(i,"clone",function(){return nt}),n.d(i,"length",function(){return rt}),n.d(i,"fromValues",function(){return it}),n.d(i,"copy",function(){return ot}),n.d(i,"set",function(){return at}),n.d(i,"add",function(){return st}),n.d(i,"subtract",function(){return ut}),n.d(i,"multiply",function(){return ht}),n.d(i,"divide",function(){return ct}),n.d(i,"ceil",function(){return ft}),n.d(i,"floor",function(){return lt}),n.d(i,"min",function(){return _t}),n.d(i,"max",function(){return dt}),n.d(i,"round",function(){return pt}),n.d(i,"scale",function(){return Mt}),n.d(i,"scaleAndAdd",function(){return xt}),n.d(i,"distance",function(){return Et}),n.d(i,"squaredDistance",function(){return mt}),n.d(i,"squaredLength",function(){return Tt}),n.d(i,"negate",function(){return bt}),n.d(i,"inverse",function(){return gt}),n.d(i,"normalize",function(){return vt}),n.d(i,"dot",function(){return Rt}),n.d(i,"cross",function(){return yt}),n.d(i,"lerp",function(){return At}),n.d(i,"hermite",function(){return St}),n.d(i,"bezier",function(){return Dt}),n.d(i,"random",function(){return Pt}),n.d(i,"transformMat4",function(){return Lt}),n.d(i,"transformMat3",function(){return Ct}),n.d(i,"transformQuat",function(){return Ot}),n.d(i,"rotateX",function(){return wt}),n.d(i,"rotateY",function(){return Ut}),n.d(i,"rotateZ",function(){return Bt}),n.d(i,"angle",function(){return It}),n.d(i,"str",function(){return Vt}),n.d(i,"exactEquals",function(){return Gt}),n.d(i,"equals",function(){return Ft}),n.d(i,"sub",function(){return Xt}),n.d(i,"mul",function(){return Ht}),n.d(i,"div",function(){return Wt}),n.d(i,"dist",function(){return Nt}),n.d(i,"sqrDist",function(){return Yt}),n.d(i,"len",function(){return qt}),n.d(i,"sqrLen",function(){return jt}),n.d(i,"forEach",function(){return kt});const o=1e-6;let a="undefined"!=typeof Float32Array?Float32Array:Array;const s=Math.random;Math.PI;function u(){let t=new a(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t){let e=new a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(t,e,n,r,i,o,s,u,h,c,f,l,_,d,p,M){let x=new a(16);return x[0]=t,x[1]=e,x[2]=n,x[3]=r,x[4]=i,x[5]=o,x[6]=s,x[7]=u,x[8]=h,x[9]=c,x[10]=f,x[11]=l,x[12]=_,x[13]=d,x[14]=p,x[15]=M,x}function l(t,e,n,r,i,o,a,s,u,h,c,f,l,_,d,p,M){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=h,t[9]=c,t[10]=f,t[11]=l,t[12]=_,t[13]=d,t[14]=p,t[15]=M,t}function _(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,e){if(t===e){let n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function p(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],_=e[11],d=e[12],p=e[13],M=e[14],x=e[15],E=n*s-r*a,m=n*u-i*a,T=n*h-o*a,b=r*u-i*s,g=r*h-o*s,v=i*h-o*u,R=c*p-f*d,y=c*M-l*d,A=c*x-_*d,S=f*M-l*p,D=f*x-_*p,P=l*x-_*M,L=E*P-m*D+T*S+b*A-g*y+v*R;return L?(L=1/L,t[0]=(s*P-u*D+h*S)*L,t[1]=(i*D-r*P-o*S)*L,t[2]=(p*v-M*g+x*b)*L,t[3]=(l*g-f*v-_*b)*L,t[4]=(u*A-a*P-h*y)*L,t[5]=(n*P-i*A+o*y)*L,t[6]=(M*T-d*v-x*m)*L,t[7]=(c*v-l*T+_*m)*L,t[8]=(a*D-s*A+h*R)*L,t[9]=(r*A-n*D-o*R)*L,t[10]=(d*g-p*T+x*E)*L,t[11]=(f*T-c*g-_*E)*L,t[12]=(s*y-a*S-u*R)*L,t[13]=(n*S-r*y+i*R)*L,t[14]=(p*m-d*b-M*E)*L,t[15]=(c*b-f*m+l*E)*L,t):null}function M(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],_=e[11],d=e[12],p=e[13],M=e[14],x=e[15];return t[0]=s*(l*x-_*M)-f*(u*x-h*M)+p*(u*_-h*l),t[1]=-(r*(l*x-_*M)-f*(i*x-o*M)+p*(i*_-o*l)),t[2]=r*(u*x-h*M)-s*(i*x-o*M)+p*(i*h-o*u),t[3]=-(r*(u*_-h*l)-s*(i*_-o*l)+f*(i*h-o*u)),t[4]=-(a*(l*x-_*M)-c*(u*x-h*M)+d*(u*_-h*l)),t[5]=n*(l*x-_*M)-c*(i*x-o*M)+d*(i*_-o*l),t[6]=-(n*(u*x-h*M)-a*(i*x-o*M)+d*(i*h-o*u)),t[7]=n*(u*_-h*l)-a*(i*_-o*l)+c*(i*h-o*u),t[8]=a*(f*x-_*p)-c*(s*x-h*p)+d*(s*_-h*f),t[9]=-(n*(f*x-_*p)-c*(r*x-o*p)+d*(r*_-o*f)),t[10]=n*(s*x-h*p)-a*(r*x-o*p)+d*(r*h-o*s),t[11]=-(n*(s*_-h*f)-a*(r*_-o*f)+c*(r*h-o*s)),t[12]=-(a*(f*M-l*p)-c*(s*M-u*p)+d*(s*l-u*f)),t[13]=n*(f*M-l*p)-c*(r*M-i*p)+d*(r*l-i*f),t[14]=-(n*(s*M-u*p)-a*(r*M-i*p)+d*(r*u-i*s)),t[15]=n*(s*l-u*f)-a*(r*l-i*f)+c*(r*u-i*s),t}function x(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],h=t[8],c=t[9],f=t[10],l=t[11],_=t[12],d=t[13],p=t[14],M=t[15];return(e*a-n*o)*(f*M-l*p)-(e*s-r*o)*(c*M-l*d)+(e*u-i*o)*(c*p-f*d)+(n*s-r*a)*(h*M-l*_)-(n*u-i*a)*(h*p-f*_)+(r*u-i*s)*(h*d-c*_)}function E(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],_=e[10],d=e[11],p=e[12],M=e[13],x=e[14],E=e[15],m=n[0],T=n[1],b=n[2],g=n[3];return t[0]=m*r+T*s+b*f+g*p,t[1]=m*i+T*u+b*l+g*M,t[2]=m*o+T*h+b*_+g*x,t[3]=m*a+T*c+b*d+g*E,m=n[4],T=n[5],b=n[6],g=n[7],t[4]=m*r+T*s+b*f+g*p,t[5]=m*i+T*u+b*l+g*M,t[6]=m*o+T*h+b*_+g*x,t[7]=m*a+T*c+b*d+g*E,m=n[8],T=n[9],b=n[10],g=n[11],t[8]=m*r+T*s+b*f+g*p,t[9]=m*i+T*u+b*l+g*M,t[10]=m*o+T*h+b*_+g*x,t[11]=m*a+T*c+b*d+g*E,m=n[12],T=n[13],b=n[14],g=n[15],t[12]=m*r+T*s+b*f+g*p,t[13]=m*i+T*u+b*l+g*M,t[14]=m*o+T*h+b*_+g*x,t[15]=m*a+T*c+b*d+g*E,t}function m(t,e,n){let r,i,o,a,s,u,h,c,f,l,_,d,p=n[0],M=n[1],x=n[2];return e===t?(t[12]=e[0]*p+e[4]*M+e[8]*x+e[12],t[13]=e[1]*p+e[5]*M+e[9]*x+e[13],t[14]=e[2]*p+e[6]*M+e[10]*x+e[14],t[15]=e[3]*p+e[7]*M+e[11]*x+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],_=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h,t[7]=c,t[8]=f,t[9]=l,t[10]=_,t[11]=d,t[12]=r*p+s*M+f*x+e[12],t[13]=i*p+u*M+l*x+e[13],t[14]=o*p+h*M+_*x+e[14],t[15]=a*p+c*M+d*x+e[15]),t}function T(t,e,n){let r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function b(t,e,n,r){let i,a,s,u,h,c,f,l,_,d,p,M,x,E,m,T,b,g,v,R,y,A,S,D,P=r[0],L=r[1],C=r[2],O=Math.sqrt(P*P+L*L+C*C);return Math.abs(O)<o?null:(P*=O=1/O,L*=O,C*=O,i=Math.sin(n),s=1-(a=Math.cos(n)),u=e[0],h=e[1],c=e[2],f=e[3],l=e[4],_=e[5],d=e[6],p=e[7],M=e[8],x=e[9],E=e[10],m=e[11],T=P*P*s+a,b=L*P*s+C*i,g=C*P*s-L*i,v=P*L*s-C*i,R=L*L*s+a,y=C*L*s+P*i,A=P*C*s+L*i,S=L*C*s-P*i,D=C*C*s+a,t[0]=u*T+l*b+M*g,t[1]=h*T+_*b+x*g,t[2]=c*T+d*b+E*g,t[3]=f*T+p*b+m*g,t[4]=u*v+l*R+M*y,t[5]=h*v+_*R+x*y,t[6]=c*v+d*R+E*y,t[7]=f*v+p*R+m*y,t[8]=u*A+l*S+M*D,t[9]=h*A+_*S+x*D,t[10]=c*A+d*S+E*D,t[11]=f*A+p*S+m*D,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+h*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+l*r,t[8]=h*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=l*i-u*r,t}function v(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-h*r,t[1]=a*i-c*r,t[2]=s*i-f*r,t[3]=u*i-l*r,t[8]=o*r+h*i,t[9]=a*r+c*i,t[10]=s*r+f*i,t[11]=u*r+l*i,t}function R(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],h=e[4],c=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+h*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+l*r,t[4]=h*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=l*i-u*r,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function A(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e,n){let r,i,a,s=n[0],u=n[1],h=n[2],c=Math.sqrt(s*s+u*u+h*h);return Math.abs(c)<o?null:(s*=c=1/c,u*=c,h*=c,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=s*s*a+i,t[1]=u*s*a+h*r,t[2]=h*s*a-u*r,t[3]=0,t[4]=s*u*a-h*r,t[5]=u*u*a+i,t[6]=h*u*a+s*r,t[7]=0,t[8]=s*h*a+u*r,t[9]=u*h*a-s*r,t[10]=h*h*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function D(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,h=o+o,c=r*s,f=r*u,l=r*h,_=i*u,d=i*h,p=o*h,M=a*s,x=a*u,E=a*h;return t[0]=1-(_+p),t[1]=f+E,t[2]=l-x,t[3]=0,t[4]=f-E,t[5]=1-(c+p),t[6]=d+M,t[7]=0,t[8]=l+x,t[9]=d-M,t[10]=1-(c+_),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O(t,e){let n=new a(3),r=-e[0],i=-e[1],o=-e[2],s=e[3],u=e[4],h=e[5],c=e[6],f=e[7],l=r*r+i*i+o*o+s*s;return l>0?(n[0]=2*(u*s+f*r+h*o-c*i)/l,n[1]=2*(h*s+f*i+c*r-u*o)/l,n[2]=2*(c*s+f*o+u*i-h*r)/l):(n[0]=2*(u*s+f*r+h*o-c*i),n[1]=2*(h*s+f*i+c*r-u*o),n[2]=2*(c*s+f*o+u*i-h*r)),C(t,e,n),t}function w(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function U(t,e){let n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+h*h+c*c),t}function B(t,e){let n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function I(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,h=o+o,c=a+a,f=i*u,l=i*h,_=i*c,d=o*h,p=o*c,M=a*c,x=s*u,E=s*h,m=s*c,T=r[0],b=r[1],g=r[2];return t[0]=(1-(d+M))*T,t[1]=(l+m)*T,t[2]=(_-E)*T,t[3]=0,t[4]=(l-m)*b,t[5]=(1-(f+M))*b,t[6]=(p+x)*b,t[7]=0,t[8]=(_+E)*g,t[9]=(p-x)*g,t[10]=(1-(f+d))*g,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function V(t,e,n,r,i){let o=e[0],a=e[1],s=e[2],u=e[3],h=o+o,c=a+a,f=s+s,l=o*h,_=o*c,d=o*f,p=a*c,M=a*f,x=s*f,E=u*h,m=u*c,T=u*f,b=r[0],g=r[1],v=r[2],R=i[0],y=i[1],A=i[2],S=(1-(p+x))*b,D=(_+T)*b,P=(d-m)*b,L=(_-T)*g,C=(1-(l+x))*g,O=(M+E)*g,w=(d+m)*v,U=(M-E)*v,B=(1-(l+p))*v;return t[0]=S,t[1]=D,t[2]=P,t[3]=0,t[4]=L,t[5]=C,t[6]=O,t[7]=0,t[8]=w,t[9]=U,t[10]=B,t[11]=0,t[12]=n[0]+R-(S*R+L*y+w*A),t[13]=n[1]+y-(D*R+C*y+U*A),t[14]=n[2]+A-(P*R+O*y+B*A),t[15]=1,t}function G(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,h=n*a,c=r*a,f=r*s,l=i*a,_=i*s,d=i*u,p=o*a,M=o*s,x=o*u;return t[0]=1-f-d,t[1]=c+x,t[2]=l-M,t[3]=0,t[4]=c-x,t[5]=1-h-d,t[6]=_+p,t[7]=0,t[8]=l+M,t[9]=_-p,t[10]=1-h-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,e,n,r,i,o,a){let s=1/(n-e),u=1/(i-r),h=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*h,t[15]=0,t}function X(t,e,n,r,i){let o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}function H(t,e,n,r){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),h=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*h*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function W(t,e,n,r,i,o,a){let s=1/(e-n),u=1/(r-i),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*h,t[15]=1,t}function N(t,e,n,r){let i,a,s,u,h,c,f,l,d,p,M=e[0],x=e[1],E=e[2],m=r[0],T=r[1],b=r[2],g=n[0],v=n[1],R=n[2];return Math.abs(M-g)<o&&Math.abs(x-v)<o&&Math.abs(E-R)<o?_(t):(f=M-g,l=x-v,d=E-R,i=T*(d*=p=1/Math.sqrt(f*f+l*l+d*d))-b*(l*=p),a=b*(f*=p)-m*d,s=m*l-T*f,(p=Math.sqrt(i*i+a*a+s*s))?(i*=p=1/p,a*=p,s*=p):(i=0,a=0,s=0),u=l*s-d*a,h=d*i-f*s,c=f*a-l*i,(p=Math.sqrt(u*u+h*h+c*c))?(u*=p=1/p,h*=p,c*=p):(u=0,h=0,c=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=h,t[6]=l,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*M+a*x+s*E),t[13]=-(u*M+h*x+c*E),t[14]=-(f*M+l*x+d*E),t[15]=1,t)}function Y(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],h=r[2],c=i-n[0],f=o-n[1],l=a-n[2],_=c*c+f*f+l*l;_>0&&(c*=_=1/Math.sqrt(_),f*=_,l*=_);let d=u*l-h*f,p=h*c-s*l,M=s*f-u*c;return(_=d*d+p*p+M*M)>0&&(d*=_=1/Math.sqrt(_),p*=_,M*=_),t[0]=d,t[1]=p,t[2]=M,t[3]=0,t[4]=f*M-l*p,t[5]=l*d-c*M,t[6]=c*p-f*d,t[7]=0,t[8]=c,t[9]=f,t[10]=l,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function j(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function k(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function z(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Z(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function K(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Q(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function J(t,e){let n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],h=t[6],c=t[7],f=t[8],l=t[9],_=t[10],d=t[11],p=t[12],M=t[13],x=t[14],E=t[15],m=e[0],T=e[1],b=e[2],g=e[3],v=e[4],R=e[5],y=e[6],A=e[7],S=e[8],D=e[9],P=e[10],L=e[11],C=e[12],O=e[13],w=e[14],U=e[15];return Math.abs(n-m)<=o*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-T)<=o*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(i-b)<=o*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-g)<=o*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=o*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-R)<=o*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(h-y)<=o*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(c-A)<=o*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-S)<=o*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(l-D)<=o*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(_-P)<=o*Math.max(1,Math.abs(_),Math.abs(P))&&Math.abs(d-L)<=o*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(p-C)<=o*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(M-O)<=o*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(x-w)<=o*Math.max(1,Math.abs(x),Math.abs(w))&&Math.abs(E-U)<=o*Math.max(1,Math.abs(E),Math.abs(U))}const $=E,tt=z;function et(){let t=new a(3);return t[0]=0,t[1]=0,t[2]=0,t}function nt(t){var e=new a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function rt(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function it(t,e,n){let r=new a(3);return r[0]=t,r[1]=e,r[2]=n,r}function ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function at(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function st(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ht(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function ct(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function ft(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function lt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function _t(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function dt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function pt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Mt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function xt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Et(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function mt(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Tt(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function bt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function gt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function vt(t,e){let n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function Rt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yt(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function At(t,e,n,r){let i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function St(t,e,n,r,i,o){let a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,h=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*h+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*h+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*h+i[2]*c,t}function Dt(t,e,n,r,i,o){let a=1-o,s=a*a,u=o*o,h=s*a,c=3*o*s,f=3*u*a,l=u*o;return t[0]=e[0]*h+n[0]*c+r[0]*f+i[0]*l,t[1]=e[1]*h+n[1]*c+r[1]*f+i[1]*l,t[2]=e[2]*h+n[2]*c+r[2]*f+i[2]*l,t}function Pt(t,e){e=e||1;let n=2*s()*Math.PI,r=2*s()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function Lt(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function Ct(t,e,n){let r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function Ot(t,e,n){let r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],h=e[2],c=i*h-o*u,f=o*s-r*h,l=r*u-i*s,_=i*l-o*f,d=o*c-r*l,p=r*f-i*c,M=2*a;return c*=M,f*=M,l*=M,_*=2,d*=2,p*=2,t[0]=s+c+_,t[1]=u+f+d,t[2]=h+l+p,t}function wt(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Ut(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Bt(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function It(t,e){let n=it(t[0],t[1],t[2]),r=it(e[0],e[1],e[2]);vt(n,n),vt(r,r);let i=Rt(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function Vt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Gt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ft(t,e){let n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=o*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=o*Math.max(1,Math.abs(i),Math.abs(u))}const Xt=ut,Ht=ht,Wt=ct,Nt=Et,Yt=mt,qt=rt,jt=Tt,kt=function(){let t=et();return function(e,n,r,i,o,a){let s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();function zt(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}!function(){let t=function(){let t=new a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}()}();function Zt(){let t=new a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Kt(t,e,n,r){let i,o,a,s,u,h=e[0],c=e[1],f=e[2],l=e[3],_=n[0],d=n[1],p=n[2],M=n[3];return(o=h*_+c*d+f*p+l*M)<0&&(o=-o,_=-_,d=-d,p=-p,M=-M),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*h+u*_,t[1]=s*c+u*d,t[2]=s*f+u*p,t[3]=s*l+u*M,t}const Qt=zt;(function(){let t=et(),e=it(1,0,0),n=it(0,1,0)})(),function(){let t=Zt(),e=Zt()}(),function(){let t=function(){let t=new a(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}()}();!function(){let t=function(){let t=new a(2);return t[0]=0,t[1]=0,t}()}();var Jt,$t=function(){function t(){}return t.DOM_CONTENT_LOADED="DOMContentLoaded",t}(),te=function(){function t(){}return t.KEY_DOWN="keydown",t}(),ee=function(){function t(){}return t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.MOUSE_MOVE="mousemove",t.MOUSE_WHEEL="mousewheel",t.DOM_MOUSE_SCROLL="DOMMouseScroll",t}(),ne=function(){function t(){}return t.GESTURE_START="gesturestart",t.GESTURE_CHANGE="gesturechange",t.GESTURE_END="gestureend",t}(),re=function(){function t(){}return t.TOUCH_START="touchstart",t.TOUCH_MOVE="touchmove",t.TOUCH_END="touchend",t}(),ie=function(){function t(){}return t.UP=38,t.DOWN=40,t}(),oe=function(){function t(t,e){this.radiusMin=1,this.radiusOffset=.1,this.gestureRadiusFactor=20,this.radius=2,this._theta=0,this._oldX=0,this._phi=90,this._oldY=0,this._currentTheta=0,this._currentPhi=90,this._camera=t,this._stage=e,this._target=i.fromValues(0,0,0),this.enable(),this._updateCamera()}return t.prototype.enable=function(){var t=this;document.addEventListener(te.KEY_DOWN,function(e){t._keyHandler(e)}),document.addEventListener(ee.MOUSE_UP,function(e){t._upHandler(e)}),this._stage.addEventListener(ee.MOUSE_DOWN,function(e){t._downHandler(e)}),this._stage.addEventListener(ee.MOUSE_MOVE,function(e){t._moveHandler(e)}),this._stage.addEventListener(ee.MOUSE_WHEEL,function(e){t._wheelHandler(e)}),this._stage.addEventListener(ee.DOM_MOUSE_SCROLL,function(e){t._domMouseScrollHandler(e)}),"ontouchstart"in window&&(this._stage.addEventListener(re.TOUCH_START,function(e){t._touchStartHandler(e)}),this._stage.addEventListener(re.TOUCH_MOVE,function(e){t._touchMoveHandler(e)}),document.addEventListener(re.TOUCH_END,function(e){t._touchEndHandler(e)})),"ongesturestart"in window&&(this._stage.addEventListener(ne.GESTURE_START,function(e){t._gestureStartHandler(e)}),this._stage.addEventListener(ne.GESTURE_CHANGE,function(e){t._gestureChangeHandler(e)}),document.addEventListener(ne.GESTURE_END,function(e){t._gestureEndHandler(e)}))},t.prototype._keyHandler=function(t){switch(t.keyCode){case ie.UP:this.radius-=this.radiusOffset,this.radius<this.radiusMin&&(this.radius=this.radiusMin);break;case ie.DOWN:this.radius+=this.radiusOffset}},t.prototype._upHandler=function(t){this.isMouseDown=!1},t.prototype._downHandler=function(t){this.isMouseDown=!0;var e=t.target.getBoundingClientRect();this._oldX=t.clientX-e.left,this._oldY=t.clientY-e.top},t.prototype._wheelHandler=function(t){t.preventDefault(),t.wheelDelta>0?(this.radius-=this.radiusOffset,this.radius<this.radiusMin&&(this.radius=this.radiusMin)):this.radius+=this.radiusOffset},t.prototype._domMouseScrollHandler=function(t){t.preventDefault(),t.detail<0?(this.radius-=this.radiusOffset,this.radius<this.radiusMin&&(this.radius=this.radiusMin)):this.radius+=this.radiusOffset},t.prototype._moveHandler=function(t){if(this.isMouseDown){var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;this.inputXY(n,r)}},t.prototype._touchStartHandler=function(t){if(t.preventDefault(),!this.isMouseDown){var e=t.changedTouches[0];this.isMouseDown=!0,this._identifier=e.identifier;var n=e.target;this._oldX=e.pageX-n.offsetLeft,this._oldY=e.pageY-n.offsetTop}},t.prototype._touchMoveHandler=function(t){if(t.preventDefault(),!this._isGestureChange)for(var e=t.changedTouches,n=e.length,r=0;r<n;r++){var i=e[r];if(i.identifier===this._identifier){var o=i.target,a=i.pageX-o.offsetLeft,s=i.pageY-o.offsetTop;this.inputXY(a,s);break}}},t.prototype._touchEndHandler=function(t){this.isMouseDown&&t.preventDefault(),this.isMouseDown=!1},t.prototype._gestureStartHandler=function(t){this._isGestureChange=!0,this.isMouseDown=!0,this._oldRadius=this.radius},t.prototype._gestureChangeHandler=function(t){t.preventDefault(),t.stopImmediatePropagation(),this.radius=this._oldRadius+this.gestureRadiusFactor*this.radiusOffset*(1-t.scale),this.radius<this.radiusMin&&(this.radius=this.radiusMin)},t.prototype._gestureEndHandler=function(t){this._isGestureChange=!1,this.isMouseDown=!1,this._identifier=-1},t.prototype.inputXY=function(t,e){this._theta-=.3*(t-this._oldX),this._oldX=t,this._phi-=.3*(e-this._oldY),this._oldY=e,this._phi<20?this._phi=20:this._phi>160&&(this._phi=160)},t.prototype._updateCamera=function(){var e=this._currentTheta*t.RAD,n=this._currentPhi*t.RAD,r=this.radius*Math.sin(n);this._camera.x=r*Math.sin(e)+this._target[0],this._camera.z=r*Math.cos(e)+this._target[2],this._camera.y=this.radius*Math.cos(n)+this._target[1],this._camera.lookAt(this._target)},t.prototype.upDate=function(t){void 0===t&&(t=.1),this._currentTheta+=(this._theta-this._currentTheta)*t,this._currentPhi+=(this._phi-this._currentPhi)*t,this._updateCamera()},t.prototype.rotate=function(t,e){this._theta+=t,this._phi+=e},t.prototype.set=function(t,e){this._theta=t,this._phi=e},t.RAD=Math.PI/180,t}(),ae=function(){function t(t,e,n,o){this._cameraUP=i.fromValues(0,1,0),this._projectionMtx=r.identity(r.create()),this._cameraMtx=r.identity(r.create()),this._lookMtx=r.identity(r.create()),this.x=0,this.y=0,this.z=0,r.perspective(this._projectionMtx,t,e,n,o)}return t.prototype.getCameraMtx=function(){return this._cameraMtx},t.prototype.lookAt=function(t){r.identity(this._lookMtx),r.lookAt(this._lookMtx,i.fromValues(this.x,this.y,this.z),t,this._cameraUP),r.multiply(this._cameraMtx,this._projectionMtx,this._lookMtx)},t.DIRECTION=i.fromValues(0,0,1),t}(),se=function(){return function(t){this.byteStride=0,this.bufferOffset=0,this.name=t}}(),ue=function(){function t(t){this.context=t,this.vboList=[],this.vboDataList=[],this.init()}return t.prototype.init=function(){},t.prototype.attachShader=function(t){this.shader=t},t.prototype.bindVertexbuffer=function(){for(var t=this.shader.attributeList.length,e=0;e<t;e++){var n=this.shader.attributeList[e];if(n.location>=0){var r=this.getVertexBuffer(n.name);this.context.bindBuffer(this.context.ARRAY_BUFFER,r.buffer),this.context.enableVertexAttribArray(n.location),this.context.vertexAttribPointer(n.location,n.stride,this.context.FLOAT,!1,r.byteStride,r.bufferOffset)}}},t.prototype.getVertexBuffer=function(t){for(var e=this.vboList.length,n=0;n<e;n++){var r=this.vboList[n];if(r.name===t)return r}return null},t.prototype.bindIndexbuffer=function(){this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.ibo)},t}(),he=(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}Jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ce=function(t){function e(e){var n=t.call(this,e)||this;return n._mMatrix=r.identity(r.create()),n._translateVec=i.create(),n._scaleVec=i.create(),n.x=0,n.y=0,n.z=0,n.scaleX=1,n.scaleY=1,n.scaleZ=1,n.rotationX=0,n.rotationY=0,n.rotationZ=0,n}return he(e,t),e.prototype.getModelMtx=function(){return r.identity(this._mMatrix),i.set(this._translateVec,this.x,this.y,this.z),r.translate(this._mMatrix,this._mMatrix,this._translateVec),r.rotateZ(this._mMatrix,this._mMatrix,this.rotationZ),r.rotateY(this._mMatrix,this._mMatrix,this.rotationY),r.rotateX(this._mMatrix,this._mMatrix,this.rotationX),i.set(this._scaleVec,this.scaleX,this.scaleY,this.scaleZ),r.scale(this._mMatrix,this._mMatrix,this._scaleVec),this._mMatrix},e}(ue),fe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),le=function(t){function e(e){return t.call(this,e)||this}return fe(e,t),e.prototype.init=function(){},e.prototype.setData=function(){},e.prototype.setAttribute=function(){var t,n=0!=(this.useAttribute&e.ATTRIBUTE_USE_POSITION),r=0!=(this.useAttribute&e.ATTRIBUTE_USE_NOMRAL),i=0!=(this.useAttribute&e.ATTRIBUTE_USE_UV);n&&((t=new se("position")).buffer=this.context.createBuffer(),this.vboList.push(t),this.context.bindBuffer(this.context.ARRAY_BUFFER,t.buffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(this.positionList),this.context.STATIC_DRAW)),r&&((t=new se("normal")).buffer=this.context.createBuffer(),this.vboList.push(t),this.context.bindBuffer(this.context.ARRAY_BUFFER,t.buffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(this.normalList),this.context.STATIC_DRAW)),i&&((t=new se("uv")).buffer=this.context.createBuffer(),this.vboList.push(t),this.context.bindBuffer(this.context.ARRAY_BUFFER,t.buffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(this.uvList),this.context.STATIC_DRAW)),this.context.bindBuffer(this.context.ARRAY_BUFFER,null)},e.ATTRIBUTE_USE_POSITION=1,e.ATTRIBUTE_USE_NOMRAL=2,e.ATTRIBUTE_USE_UV=4,e}(ce),_e=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),de=function(t){function e(e,n,r,i,o,a){void 0===a&&(a=le.ATTRIBUTE_USE_POSITION);var s=t.call(this,e)||this;return s.width=n,s.height=r,s.segmentsW=i,s.segmentsH=o,s.useAttribute=a,s.setData(),s}return _e(e,t),e.prototype.setData=function(){for(var t=this.width/2,e=this.height/2,n=this.width/this.segmentsW,r=this.height/this.segmentsH,i=this.segmentsW+1,o=this.segmentsH+1,a=[],s=[],u=[],h=[],c=0;c<o;c++)for(var f=r*c-e,l=1-c/this.segmentsH,_=0;_<i;_++)a.push(n*_-t,-f,0),s.push(0,0,1),u.push(_/this.segmentsW,l);this.positionList=a,this.normalList=s,this.uvList=u,this.setAttribute();for(c=0;c<this.segmentsH;c++){var d=i*c,p=i*(c+1);for(_=0;_<this.segmentsW;_++){var M=_+d,x=_+p,E=_+1+p,m=_+1+d;h.push(M,x,m),h.push(x,E,m)}}this.iboData=h,this.ibo=this.context.createBuffer(),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.ibo),this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,new Int16Array(this.iboData),this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,null)},e}(le),pe=function(){return function(t,e){this.name=t,this.stride=e}}(),Me=function(){function t(t,e){this.name=e,this.type=t}return t.TYPE_VALUE=0,t.TYPE_VECTOR3=1,t.TYPE_VECTOR4=2,t.TYPE_MATRIX=3,t.TYPE_TEXTURE=4,t}(),xe=function(){function t(t){this.context=t,this.uniformList=[],this.attributeList=[],this.init()}return t.prototype.init=function(){},t.prototype.createProgram=function(){var t,e;for(this.vShader=this.creatShader(this.vShaderSource,this.context.VERTEX_SHADER),this.fShader=this.creatShader(this.fShaderSource,this.context.FRAGMENT_SHADER),this.program=this.context.createProgram(),this.context.attachShader(this.program,this.vShader),this.context.attachShader(this.program,this.fShader),this.context.linkProgram(this.program),e=this.attributeList.length,t=0;t<e;t++){var n=this.attributeList[t];n.location=this.context.getAttribLocation(this.program,n.name)}for(e=this.uniformList.length,t=0;t<e;t++){var r=this.uniformList[t];r.location=this.context.getUniformLocation(this.program,r.name)}},t.prototype.bindShader=function(){this.bindProgram(),this.bindUniform()},t.prototype.bindProgram=function(){this.context.getProgramParameter(this.program,this.context.LINK_STATUS)?this.context.useProgram(this.program):console.log(this.context.getProgramInfoLog(this.program))},t.prototype.bindUniform=function(){for(var t=this.uniformList.length,e=0;e<t;e++){var n=this.uniformList[e];switch(n.type){case Me.TYPE_MATRIX:this.context.uniformMatrix4fv(n.location,!1,n.matrix);break;case Me.TYPE_VALUE:this.context.uniform1f(n.location,n.value);break;case Me.TYPE_VECTOR3:this.context.uniform3fv(n.location,n.vector3);break;case Me.TYPE_VECTOR4:this.context.uniform4fv(n.location,n.vector4);break;case Me.TYPE_TEXTURE:this.context.uniform1i(n.location,n.value),this.context.activeTexture(this.context["TEXTURE"+n.value]),this.context.bindTexture(this.context.TEXTURE_2D,n.texture)}}},t.prototype.creatShader=function(t,e){var n=this.context.createShader(e);return this.context.shaderSource(n,t),this.context.compileShader(n),this.context.getShaderParameter(n,this.context.COMPILE_STATUS)?n:(console.log(e===this.context.VERTEX_SHADER,this.context.getShaderInfoLog(n)),null)},t.prototype.getUniform=function(t){for(var e=this.uniformList.length,n=0;n<e;n++){var r=this.uniformList[n];if(r.name===t)return r}return null},t}(),Ee=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ee(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){t!==this._texture&&(this._texture=t,this.uniformList[1].texture=t.texture)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaTexture",{get:function(){return this._alphaTexture},set:function(t){t!==this._alphaTexture&&(this._alphaTexture=t,this.uniformList[2].texture=t.texture)},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t,e;this.vShaderSource="\n    attribute vec3 position;\n    attribute vec2 uv;\n    uniform mat4 mvpMatrix;\n    varying vec2 vUV;\n    \n    void main(void)\n    {\n      vUV = uv;\n      gl_Position = mvpMatrix * vec4(position, 1.0);\n    }\n    ",this.fShaderSource="\n    precision mediump float;\n    \n    uniform sampler2D texture;\n    uniform sampler2D alphaTexture;\n    varying vec2 vUV;\n    \n    void main(void)\n    {\n      vec4 rgb = texture2D(texture, vUV);\n      vec4 alpha = texture2D(alphaTexture, vUV);\n      gl_FragColor = vec4(rgb.rgb, alpha.r);\n    }\n    ",t=new Me(Me.TYPE_MATRIX,"mvpMatrix"),this.uniformList[0]=t,(t=new Me(Me.TYPE_TEXTURE,"texture")).value=0,this.uniformList[1]=t,(t=new Me(Me.TYPE_TEXTURE,"alphaTexture")).value=1,this.uniformList[2]=t,e=new pe("position",3),this.attributeList[0]=e,e=new pe("uv",2),this.attributeList[1]=e,this.createProgram()},e}(xe),Te=function(){function t(e){var n=e.byteLength;console.log("data byteLength:",n);var r=e.subarray(0,3),i=String.fromCharCode.apply("",r);if(console.log("Signature:",i),"ATF"!==i)throw new Error("This file is not ATF format.");var o=e.subarray(3,7);console.log("Reserved:",o),console.log("-e:",1&o[2]),console.log("-n:",(254&o[2])>>1);var a=e[7];console.log("Version:",a);var s=t.getValue(e.subarray(8,12));if(console.log("Length:",s),e.byteLength!==s+12)throw new Error("Length does not match to file size, this file maybe broken.");var u=128&e[12];console.log("Cubemap:",u);var h=127&e[12];console.log("Format:",h);var c=e[13];console.log("Log2Width:",c),this.width=1<<c;var f=e[14];console.log("Log2Height:",f),this.height=1<<f;var l=e[15];if(console.log("Count:",l),console.log("-----------------------"),0!==u)throw new Error("Cubemap is not supported by this Parser yet.");switch(h){case t.RAW_Compressed:this.parseATFRAWCOMPRESSED(e.subarray(16,n),l);break;case t.RAW_Compressed_with_Alpha:this.parseATFRAWCOMPRESSEDALPHA(e.subarray(16,n),l);break;default:throw new Error("Format is not supported by this Parser yet.")}}return t.prototype.parseATFRAWCOMPRESSED=function(e,n){for(var r=Array(n),i=Array(n),o=Array(n),a=Array(n),s=0,u=0;u<n;u++){var h=t.getValue(e.subarray(s,s+4));s+=4,r[u]=e.subarray(s,s+h),s+=h;var c=t.getValue(e.subarray(s,s+4));s+=4,i[u]=e.subarray(s,s+c),s+=c;var f=t.getValue(e.subarray(s,s+4));s+=4,o[u]=e.subarray(s,s+f),s+=f;var l=t.getValue(e.subarray(s,s+4));s+=4,a[u]=e.subarray(s,s+l),s+=l}r.length&&r[0].length&&(this.dxtData={useAlpha:!1,internalformat:t.WEBGL_compressed_texture_s3tc__COMPRESSED_RGB_S3TC_DXT1_EXT,dataList:r,alphaDataList:null}),i.length&&i[0].length&&(this.pvrtcData={useAlpha:!1,internalformat:t.WEBGL_compressed_texture_pvrtc__COMPRESSED_RGB_PVRTC_4BPPV1_IMG,dataList:i,alphaDataList:null}),o.length&&o[0].length&&(this.etc1Data={useAlpha:!1,internalformat:t.WEBGL_compressed_texture_etc1__COMPRESSED_RGB_ETC1_WEBGL,dataList:o,alphaDataList:null})},t.prototype.parseATFRAWCOMPRESSEDALPHA=function(e,n){for(var r=Array(n),i=Array(n),o=Array(n),a=Array(n),s=Array(n),u=0,h=0;h<n;h++){var c=t.getValue(e.subarray(u,u+4));u+=4,r[h]=e.subarray(u,u+c),u+=c;var f=t.getValue(e.subarray(u,u+4));u+=4,i[h]=e.subarray(u,u+f),u+=f;var l=t.getValue(e.subarray(u,u+4));u+=4;var _=l/2;o[h]=e.subarray(u,u+_),u+=_,a[h]=e.subarray(u,u+_),u+=_;var d=t.getValue(e.subarray(u,u+4));u+=4,s[h]=e.subarray(u,u+d),u+=d}r.length&&r[0].length&&(this.dxtData={useAlpha:!0,internalformat:t.WEBGL_compressed_texture_s3tc__COMPRESSED_RGBA_S3TC_DXT5_EXT,dataList:r,alphaDataList:null}),i.length&&i[0].length&&(this.pvrtcData={useAlpha:!0,internalformat:t.WEBGL_compressed_texture_pvrtc__COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,dataList:i,alphaDataList:null}),o.length&&o[0].length&&(this.etc1Data={useAlpha:!0,internalformat:t.WEBGL_compressed_texture_etc1__COMPRESSED_RGB_ETC1_WEBGL,dataList:o,alphaDataList:a})},t.getValue=function(t){for(var e=0,n=t.length,r=0;r<n;r++)e+=t[r]<<8*(n-r-1);return e},t.RGB888=0,t.RGBA88888=1,t.Compressed=2,t.RAW_Compressed=3,t.Compressed_with_Alpha=4,t.RAW_Compressed_with_Alpha=5,t.Compressed_Lossy=12,t.Compressed_Lossy_with_Alpha=13,t.WEBGL_compressed_texture_s3tc__COMPRESSED_RGB_S3TC_DXT1_EXT=33776,t.WEBGL_compressed_texture_s3tc__COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,t.WEBGL_compressed_texture_pvrtc__COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840,t.WEBGL_compressed_texture_pvrtc__COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842,t.WEBGL_compressed_texture_etc1__COMPRESSED_RGB_ETC1_WEBGL=36196,t}(),be=function(){function t(t){this.context=t,this.init()}return t.prototype.init=function(){this.texture=this.context.createTexture()},t.prototype.setImage=function(t){this.image=t,this.context.bindTexture(this.context.TEXTURE_2D,this.texture),this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,t),this.context.generateMipmap(this.context.TEXTURE_2D),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR_MIPMAP_LINEAR),this.context.bindTexture(this.context.TEXTURE_2D,null)},t}(),ge=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ge(e,t),e.prototype.setCompressedImage=function(t,e,n,r){this.context.bindTexture(this.context.TEXTURE_2D,this.texture);for(var i=!0,o=t.length,a=0;a<o;a++)t[a].length?this.context.compressedTexImage2D(this.context.TEXTURE_2D,a,e,n>>a,r>>a,0,t[a]):i=!1;i?this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR_MIPMAP_LINEAR):this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MAG_FILTER,this.context.LINEAR),this.context.bindTexture(this.context.TEXTURE_2D,null)},e}(be),Re=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Re(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){t!==this._texture&&(this._texture=t,this.uniformList[1].texture=t.texture)},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t,e;this.vShaderSource="\n    attribute vec3 position;\n    attribute vec2 uv;\n    uniform mat4 mvpMatrix;\n    varying vec2 vUV;\n    \n    void main(void)\n    {\n      vUV = uv;\n      gl_Position = mvpMatrix * vec4(position, 1.0);\n    }\n    ",this.fShaderSource="\n    precision mediump float;\n    \n    uniform sampler2D texture;\n    varying vec2 vUV;\n    \n    void main(void)\n    {\n      gl_FragColor = texture2D(texture, vUV);\n    }\n    ",t=new Me(Me.TYPE_MATRIX,"mvpMatrix"),this.uniformList[0]=t,(t=new Me(Me.TYPE_TEXTURE,"texture")).value=0,this.uniformList[1]=t,e=new pe("position",3),this.attributeList[0]=e,e=new pe("uv",2),this.attributeList[1]=e,this.createProgram()},e}(xe),Ae=function(){function t(){console.log(new Date),console.log(navigator.userAgent),this.canvas=document.getElementById("myCanvas"),this.canvas.width=t.CANVAS_WIDTH,this.canvas.height=t.CANVAS_HEIGHT,this.context=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.extS3TC=this.context.getExtension("WEBGL_compressed_texture_s3tc")||this.context.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),this.addText("S3TC support: "+(null!==this.extS3TC)),this.extPVRTC=this.context.getExtension("WEBGL_compressed_texture_pvrtc")||this.context.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.addText("PVRTC support: "+(null!==this.extPVRTC)),this.extETC1=this.context.getExtension("WEBGL_compressed_texture_etc1")||this.context.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),this.addText("ETC1 support: "+(null!==this.extETC1)),this.supportedCompressedTextureFormat=this.context.getParameter(this.context.COMPRESSED_TEXTURE_FORMATS);for(var e="",n=this.supportedCompressedTextureFormat.length,r=0;r<n;r++)0===r&&(e+="\n"),e+=t.COMPRESSED_TEXTURE_FORMAT_MAP[this.supportedCompressedTextureFormat[r]]+"\n";this.addText("supported formats: ["+e+"]"),this.addText("--------------------");var i=document.createElement("canvas").getContext("webgl2");if(this.addText("WebGL 2.0 support: "+(null!==i)),i){var o=i.getExtension("WEBGL_compressed_texture_etc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_etc");this.addText("ETC2 support: "+(null!==o&&i.getParameter(this.context.COMPRESSED_TEXTURE_FORMATS).includes(37492)))}this.stats=new Stats,document.body.appendChild(this.stats.dom),this.context.clearColor(0,0,0,1),this.context.clearDepth(1),this.context.frontFace(this.context.CCW),this.context.enable(this.context.DEPTH_TEST),this.context.depthFunc(this.context.LEQUAL),this.context.enable(this.context.BLEND),this.context.blendFunc(this.context.SRC_ALPHA,this.context.ONE_MINUS_SRC_ALPHA),this.camera=new ae(60*t.RAD,t.CANVAS_WIDTH/t.CANVAS_HEIGHT,.1,1e3),this.controller=new oe(this.camera,this.canvas),this.canvas.style.cursor="move",this.controller.radius=80,this.controller.radiusOffset=1,this.controller.rotate(0,0),this.scene=[],this.alphaScene=[],this.render(),this.addATFPlane("js/assets/compressed.atf",0,0,0),this.addATFPlane("js/assets/alpha.atf",30,30,30)}return t.prototype.addATFPlane=function(t,e,n,r){var i=this;return fetch(t).then(function(t){return t.arrayBuffer()}).then(function(t){var o=new Uint8Array(t);i.readComplete(new Te(o),e,n,r)})},t.prototype.readComplete=function(t,e,n,r){var i;if(t.dxtData&&this.extS3TC&&this.supportedCompressedTextureFormat.includes(t.dxtData.internalformat))i=t.dxtData;else if(t.pvrtcData&&this.extPVRTC&&this.supportedCompressedTextureFormat.includes(t.pvrtcData.internalformat))i=t.pvrtcData;else{if(!(t.etc1Data&&this.extETC1&&this.supportedCompressedTextureFormat.includes(t.etc1Data.internalformat)))return;i=t.etc1Data}var o,a=new de(this.context,8,8,10,10,le.ATTRIBUTE_USE_POSITION|le.ATTRIBUTE_USE_UV);a.scaleX=8,a.scaleY=-8,a.x=e,a.y=n,a.z=r,i.useAlpha?this.alphaScene.push(a):this.scene.push(a),o=i.alphaDataList?new me(this.context):new ye(this.context),a.attachShader(o);var s=new ve(this.context);if(s.setCompressedImage(i.dataList,i.internalformat,t.width,t.height),a.shader.texture=s,i.alphaDataList){var u=new ve(this.context);u.setCompressedImage(i.alphaDataList,i.internalformat,t.width,t.height),a.shader.alphaTexture=u}},t.prototype.render=function(){var t=this;this.stats.begin(),this.controller.upDate(.1);var e=r.identity(r.create()),n=r.identity(r.create());r.multiply(n,this.camera.getCameraMtx(),e);var i=this.camera.getCameraMtx();this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT),this.context.depthMask(!0),this.context.disable(this.context.BLEND);for(var o=this.scene.length,a=0;a<o;a++){if(c=this.scene[a]){var s=c.getModelMtx(),u=r.create();r.multiply(u,i,s),c.shader.getUniform("mvpMatrix").matrix=u,c.shader.bindShader(),c.bindVertexbuffer(),c.bindIndexbuffer(),this.context.drawElements(this.context.TRIANGLES,c.iboData.length,this.context.UNSIGNED_SHORT,0)}}this.context.depthMask(!1),this.context.enable(this.context.BLEND);var h=this.alphaScene.length;for(a=0;a<h;a++){var c;if(c=this.alphaScene[a]){s=c.getModelMtx(),u=r.create();r.multiply(u,i,s),c.shader.getUniform("mvpMatrix").matrix=u,c.shader.bindShader(),c.bindVertexbuffer(),c.bindIndexbuffer(),this.context.drawElements(this.context.TRIANGLES,c.iboData.length,this.context.UNSIGNED_SHORT,0)}}this.context.flush(),this.stats.end(),requestAnimationFrame(function(){return t.render()})},t.prototype.addText=function(t){var e=document.createElement("div");e.innerText=t,document.body.appendChild(e)},t.COMPRESSED_TEXTURE_FORMAT_MAP={33776:"COMPRESSED_RGB_S3TC_DXT1_EXT",33777:"COMPRESSED_RGBA_S3TC_DXT1_EXT",33778:"COMPRESSED_RGBA_S3TC_DXT3_EXT",33779:"COMPRESSED_RGBA_S3TC_DXT5_EXT",35840:"COMPRESSED_RGB_PVRTC_4BPPV1_IMG",35842:"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",35841:"COMPRESSED_RGB_PVRTC_2BPPV1_IMG",35843:"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",36196:"COMPRESSED_RGB_ETC1_WEBGL"},t.RAD=Math.PI/180,t.CANVAS_WIDTH=960,t.CANVAS_HEIGHT=540,t}();window.addEventListener($t.DOM_CONTENT_LOADED,function(){new Ae})}]);